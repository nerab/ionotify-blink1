#!/usr/bin/env ruby

require 'ionotify/blink1'
include Ionotify::Blink1

blink1 = Notifier.new(Tool.new)
notifier = FsEventAdapter.new(ARGV)

notifier.watch do |file|
  begin
    blink1.status(File.read(file).chomp)
  rescue
    STDERR.puts "Error: #{$!.message}"
  end
end

notifier.run
