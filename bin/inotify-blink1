#!/usr/bin/env ruby

require 'rb-inotify'

notifier = INotify::Notifier.new

status_file = ARGV[0]

notifier.watch(status_file, :modify) do
  case File.read(status_file)
    when 'success'
      %x[blink1-tool --quiet --rgb 0,64,0]
    when 'failed'
      %x[blink1-tool --quiet --rgb 64,0,0]
    else
      %x[blink1-tool --quiet --rgb 0,0,32]
   end
end

notifier.run
